{"remainingRequest":"C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\src\\view\\config\\components\\roleSave.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\src\\view\\config\\components\\roleSave.vue","mtime":1598317124454},{"path":"C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyByb2xlQXV0aExpc3QgYXMgZ2V0TGlzdCwgcm9sZVNhdmUgYXMgc2F2ZSB9IGZyb20gIkAvcmVxdWVzdC9hcGkuanMiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAicm9sZVNhdmUiLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBkYXRhOiBbXSwNCiAgICAgIGZvcm06IHsNCiAgICAgICAgaWQ6IG51bGwsDQogICAgICAgIG5hbWU6ICIiLA0KICAgICAgICBhdXRoX2xpc3Q6IFtdLA0KICAgICAgICBzdGF0dXM6IDENCiAgICAgIH0NCiAgICB9Ow0KICB9LA0KICBwcm9wczogew0KICAgIHZhbHVlOiB7DQogICAgICB0eXBlOiBPYmplY3QNCiAgICB9LA0KICAgIHNob3c6IHsNCiAgICAgIHR5cGU6IFN0cmluZw0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBzaG93KHZhbCkgew0KICAgICAgaWYgKHZhbCA9PT0gdGhpcy4kb3B0aW9ucy5uYW1lKSB7DQogICAgICAgIHRoaXMuJE9iamVjdE1peGVkKHRoaXMuZm9ybSwgdGhpcy52YWx1ZSk7DQogICAgICAgIHRoaXMuZ2V0TGlzdCgpOw0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldExpc3QoKSB7DQogICAgICBnZXRMaXN0KHt9KS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuZGF0YSA9IHJlcy5kYXRhOw0KICAgICAgICBpZiAodGhpcy5mb3JtLmF1dGhfbGlzdC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgdGhpcy4kcmVmcy50cmVlLnNldENoZWNrZWRLZXlzKHRoaXMudmFsdWUuYXV0aF9saXN0KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBzdWJtaXQoKSB7DQogICAgICB0aGlzLmZvcm0uYXV0aF9saXN0ID0gdGhpcy4kcmVmcy50cmVlLmdldENoZWNrZWRLZXlzKCk7DQogICAgICBzYXZlKHRoaXMuZm9ybSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3Moew0KICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2cgfHwgIuaTjeS9nOaIkOWKnyINCiAgICAgICAgfSk7DQogICAgICAgIHRoaXMuJGVtaXQoInZpc2libGVDaGFuZ2UiLCB7IGdldExpc3Q6IHRydWUsIHNob3c6ICIiIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBjbG9zZSgpIHsNCiAgICAgIHRoaXMuJGVtaXQoInZpc2libGVDaGFuZ2UiLCB7IGdldExpc3Q6IHRoaXMucGFyZW50UmVmcmVzaCwgc2hvdzogIiIgfSk7DQogICAgfSwNCiAgICBjbG9zZWQoKSB7DQogICAgICBPYmplY3QuYXNzaWduKHRoaXMuJGRhdGEsIHRoaXMuJG9wdGlvbnMuZGF0YSgpKTsNCiAgICAgIHRoaXMuJHJlZnMudHJlZS5zZXRDaGVja2VkS2V5cyhbXSk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["roleSave.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"roleSave.vue","sourceRoot":"src/view/config/components","sourcesContent":["<template>\r\n  <div>\r\n    <el-dialog\r\n      :title=\"form.id != null?'修改角色':'添加角色'\"\r\n      :visible=\"show === $options.name\"\r\n      :close-on-click-modal=\"false\"\r\n      @close=\"close\"\r\n      append-to-body\r\n      @closed=\"closed\"\r\n      width=\"680px\"\r\n    >\r\n      <el-form size=\"mini\" label-width=\"120px\">\r\n        <el-form-item style=\"width:50%;display:inline-block\" label=\"角色名称\">\r\n          <el-input v-model=\"form.name\" placeholder=\"请输入角色名称\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item style=\"width:50%;display:inline-block\" label=\"角色状态\">\r\n          <el-switch v-model=\"form.status\" :active-value=\"1\" :inactive-value=\"2\"></el-switch>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"关联权限\">\r\n          <el-tree\r\n            class=\"tree\"\r\n            ref=\"tree\"\r\n            :data=\"data\"\r\n            show-checkbox\r\n            node-key=\"authIndex\"\r\n            default-expand-all\r\n            check-strictly\r\n            :props=\"{children: 'item',label:'authName'}\"\r\n          >\r\n            <div class=\"el-tree-node__label jus-b\" slot-scope=\"{ node, data }\">\r\n              <span>{{node.data.authName}}</span>\r\n              <span class=\"tips\" v-if=\"!node.data.item\">{{node.data.authIndex}}</span>\r\n            </div>\r\n          </el-tree>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"medium\" @click=\"close\">取 消</el-button>\r\n        <el-button size=\"medium\" type=\"primary\" @click=\"submit\">提 交</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { roleAuthList as getList, roleSave as save } from \"@/request/api.js\";\r\nexport default {\r\n  name: \"roleSave\",\r\n  data() {\r\n    return {\r\n      data: [],\r\n      form: {\r\n        id: null,\r\n        name: \"\",\r\n        auth_list: [],\r\n        status: 1\r\n      }\r\n    };\r\n  },\r\n  props: {\r\n    value: {\r\n      type: Object\r\n    },\r\n    show: {\r\n      type: String\r\n    }\r\n  },\r\n  watch: {\r\n    show(val) {\r\n      if (val === this.$options.name) {\r\n        this.$ObjectMixed(this.form, this.value);\r\n        this.getList();\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getList() {\r\n      getList({}).then(res => {\r\n        this.data = res.data;\r\n        if (this.form.auth_list.length > 0) {\r\n          this.$refs.tree.setCheckedKeys(this.value.auth_list);\r\n        }\r\n      });\r\n    },\r\n    submit() {\r\n      this.form.auth_list = this.$refs.tree.getCheckedKeys();\r\n      save(this.form).then(res => {\r\n        this.$message.success({\r\n          message: res.msg || \"操作成功\"\r\n        });\r\n        this.$emit(\"visibleChange\", { getList: true, show: \"\" });\r\n      });\r\n    },\r\n    close() {\r\n      this.$emit(\"visibleChange\", { getList: this.parentRefresh, show: \"\" });\r\n    },\r\n    closed() {\r\n      Object.assign(this.$data, this.$options.data());\r\n      this.$refs.tree.setCheckedKeys([]);\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.tree {\r\n  height: 420px;\r\n  overflow-y: auto;\r\n}\r\n.el-tree-node__label {\r\n  width: 100%;\r\n  .tips {\r\n    font-size: 12px;\r\n    color: #999;\r\n    padding-right: 15px;\r\n  }\r\n}\r\n</style>"]}]}