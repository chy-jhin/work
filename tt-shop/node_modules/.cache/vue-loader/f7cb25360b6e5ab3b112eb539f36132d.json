{"remainingRequest":"C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\src\\view\\goods\\PostMoney\\PostMoney.vue?vue&type=style&index=0&id=7ef7b732&lang=less&scoped=true&","dependencies":[{"path":"C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\src\\view\\goods\\PostMoney\\PostMoney.vue","mtime":1604742750108},{"path":"C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\yujing\\Desktop\\vue\\Admin\\tt-shop\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLm15ZGlhbG9nIHsNCiAgL2RlZXAvIC5lbC1kaWFsb2dfX2JvZHkgew0KICAgIHBhZGRpbmctdG9wOiAwOw0KICAgIHBhZGRpbmctYm90dG9tOiAwOw0KICAgIC5lbC10YWItcGFuZSB7DQogICAgICBoZWlnaHQ6IDQ4MHB4Ow0KICAgICAgb3ZlcmZsb3cteTogYXV0bzsNCiAgICB9DQogIH0NCn0NCi5pbWFnZS1ib3ggew0KICB3aWR0aDogODBweDsNCiAgaGVpZ2h0OiA4MHB4Ow0KICBib3JkZXI6IDFweCBzb2xpZCAjZWVlOw0KICBib3JkZXItcmFkaXVzOiA0cHg7DQogIG1hcmdpbi1yaWdodDogMTBweDsNCn0NCi51cGxvYWQtYm94IHsNCiAgLmF2YXRhci11cGxvYWRlci1pY29uIHsNCiAgICBmb250LXNpemU6IDI4cHg7DQogICAgY29sb3I6ICM4YzkzOWQ7DQogICAgd2lkdGg6IDgwcHg7DQogICAgaGVpZ2h0OiA4MHB4Ow0KICAgIGxpbmUtaGVpZ2h0OiA4MHB4Ow0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICBib3JkZXI6IDFweCBkYXNoZWQgI2Q5ZDlkOTsNCiAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogIH0NCiAgLmF2YXRhciB7DQogICAgd2lkdGg6IDEwMHB4Ow0KICAgIGhlaWdodDogMTI1cHg7DQogIH0NCn0NCi51cGxvYWQtaW1hZ2VzLWJveCB7DQogICYgL2RlZXAvIC5lbC11cGxvYWQtbGlzdF9faXRlbSB7DQogICAgd2lkdGg6IDgwcHg7DQogICAgaGVpZ2h0OiA4MHB4Ow0KICB9DQogICYgL2RlZXAvIC5lbC11cGxvYWQtLXBpY3R1cmUtY2FyZCB7DQogICAgd2lkdGg6IDgwcHg7DQogICAgaGVpZ2h0OiA4MHB4Ow0KICAgIGxpbmUtaGVpZ2h0OiA4MHB4Ow0KICB9DQp9DQo="},{"version":3,"sources":["PostMoney.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PostMoney.vue","sourceRoot":"src/view/goods/PostMoney","sourcesContent":["<template>\r\n  <div>\r\n    <el-dialog\r\n      class=\"mydialog\"\r\n      :title=\"!form.id ? '添加邮费模板' : '修改邮费模板'\"\r\n      :visible=\"show === $options.name\"\r\n      :close-on-click-modal=\"false\"\r\n      append-to-body\r\n      @close=\"close\"\r\n      @closed=\"closed\"\r\n      width=\"1024px\"\r\n    >\r\n      <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n        <el-tab-pane label=\"模板配置\" name=\"first\">\r\n          <el-form class=\"form-box\" size=\"mini\" label-width=\"80px\">\r\n            <el-row>\r\n              <el-col :span=\"13\">\r\n                <el-form-item label=\"模板名称\" label-width=\"80px\"\r\n                  ><el-input\r\n                    v-model=\"form.name\"\r\n                    placeholder=\"请输入模板名称\"\r\n                    style=\"width: 300px\"\r\n                    clearable\r\n                  ></el-input\r\n                ></el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"11\">\r\n                <el-form-item label=\"是否包邮\">\r\n                  <el-switch\r\n                    v-model=\"form.is_free\"\r\n                    :active-value=\"1\"\r\n                    :inactive-value=\"2\"\r\n                  ></el-switch>\r\n                </el-form-item>\r\n              </el-col>\r\n\r\n              <el-col :span=\"13\" v-if=\"form.is_free == 2\">\r\n                <el-form-item label=\"计价方式\">\r\n                  <el-radio-group v-model=\"form.mode\" @change=\"checkType\">\r\n                    <el-radio :label=\"1\">计件</el-radio>\r\n                    <el-radio :label=\"2\">称重</el-radio>\r\n                  </el-radio-group>\r\n                </el-form-item>\r\n              </el-col>\r\n\r\n              <el-col\r\n                :span=\"12\"\r\n                style=\"padding-left: 12px\"\r\n                v-if=\"form.is_free == 2\"\r\n              >\r\n                <el-checkbox v-model=\"form.condition\"\r\n                  >是否指定条件包邮</el-checkbox\r\n                >\r\n              </el-col>\r\n            </el-row>\r\n          </el-form>\r\n        </el-tab-pane>\r\n        <el-tab-pane label=\"计费规则\" name=\"second\" v-if=\"form.is_free != 1\">\r\n          <el-table\r\n            :data=\"form.rule\"\r\n            border\r\n            height=\"480\"\r\n            size=\"small\"\r\n            class=\"sku_table\"\r\n            style=\"width: 100%\"\r\n          >\r\n            <el-table-column label=\"计价方式\">\r\n              <template slot-scope=\"scope\">\r\n                <span>{{ scope.row.mode == 1 ? \"计件\" : \"称重\" }}</span>\r\n              </template>\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"件数\" v-if=\"form.mode == 1\">\r\n              <template slot-scope=\"scope\">\r\n                <el-input\r\n                  style=\"width: 70px\"\r\n                  v-model=\"scope.row.num\"\r\n                  size=\"mini\"\r\n                  :disabled=\"scope.$index !== editIndex\"\r\n                ></el-input>\r\n                <span> 件</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column v-if=\"form.mode == 2\" label=\"重量\">\r\n              <template slot-scope=\"scope\">\r\n                <el-input\r\n                  style=\"width: 70px\"\r\n                  v-model=\"scope.row.weight\"\r\n                  size=\"mini\"\r\n                  :disabled=\"scope.$index !== editIndex\"\r\n                ></el-input>\r\n                <span> kg</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"费用\">\r\n              <template slot-scope=\"scope\">\r\n                <el-input\r\n                  style=\"width: 70px\"\r\n                  v-model=\"scope.row.money\"\r\n                  size=\"mini\"\r\n                  :disabled=\"scope.$index !== editIndex\"\r\n                ></el-input>\r\n                <span> 元</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"地区\">\r\n              <template slot-scope=\"scope\">\r\n                <el-input\r\n                  v-model=\"scope.row.cateName\"\r\n                  size=\"mini\"\r\n                  disabled\r\n                ></el-input>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column width=\"300\" align=\"center\">\r\n              <template slot=\"header\">\r\n                <el-button size=\"mini\" type=\"primary\" @click=\"addGoods\"\r\n                  >新增规则</el-button\r\n                >\r\n              </template>\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  size=\"mini\"\r\n                  v-if=\"editIndex == scope.$index\"\r\n                  @click=\"editIndex = -1\"\r\n                  >保存</el-button\r\n                >\r\n                <el-button size=\"mini\" v-else @click=\"editIndex = scope.$index\"\r\n                  >编辑</el-button\r\n                >\r\n\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  v-if=\"editIndex == scope.$index\"\r\n                  @click=\"editIndex = -1\"\r\n                  >取消</el-button\r\n                >\r\n\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  v-else\r\n                  @click=\"delete_goods(scope.$index)\"\r\n                  >删除</el-button\r\n                >\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"primary\"\r\n                  @click=\"\r\n                    infoDialog = {\r\n                      show: 'checkCitys',\r\n                      value: { form: scope.row, cities: cities },\r\n                    }\r\n                  \"\r\n                  >选择城市</el-button\r\n                >\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-tab-pane>\r\n        <el-tab-pane\r\n          label=\"包邮条件\"\r\n          name=\"third\"\r\n          v-if=\"form.is_free != 1\"\r\n        >\r\n          <el-table\r\n            :data=\"form.proviso\"\r\n            border\r\n            height=\"480\"\r\n            size=\"small\"\r\n            class=\"sku_table\"\r\n            style=\"width: 100%\"\r\n          >\r\n            <el-table-column label=\"类型\">\r\n              <template slot-scope=\"scope\">\r\n\r\n                <el-select\r\n                  v-model=\"scope.row.type\"\r\n                  clearable\r\n                  placeholder=\"请选择\"\r\n                  :disabled=\"scope.$index !== editIndex2\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"item in types\"\r\n                    :key=\"item.value\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"包邮条件\">\r\n              <template slot-scope=\"scope\">\r\n                <el-input\r\n                  style=\"width: 100px\"\r\n                  v-model=\"scope.row.condition\"\r\n                  size=\"mini\"\r\n                  :disabled=\"scope.$index !== editIndex2\"\r\n                ></el-input>\r\n                <span>{{ scope.row.type == 1 ? \"件\" : \"kg\" }}</span>\r\n              </template>\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"地区\">\r\n              <template slot-scope=\"scope\">\r\n                <el-input\r\n                  v-model=\"scope.row.cateName\"\r\n                  size=\"mini\"\r\n                  :disabled=\"scope.$index !== editIndex2\"\r\n                ></el-input>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column width=\"300\" align=\"center\">\r\n              <template slot=\"header\">\r\n                <el-button size=\"mini\" type=\"primary\" @click=\"addGoods2\"\r\n                  >新增条件</el-button\r\n                >\r\n              </template>\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  size=\"mini\"\r\n                  v-if=\"editIndex2 == scope.$index\"\r\n                  @click=\"editIndex2 = -1\"\r\n                  >保存</el-button\r\n                >\r\n                <el-button size=\"mini\" v-else @click=\"editIndex2 = scope.$index\"\r\n                  >编辑</el-button\r\n                >\r\n\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  v-if=\"editIndex2 == scope.$index\"\r\n                  @click=\"editIndex2 = -1\"\r\n                  >取消</el-button\r\n                >\r\n\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"danger\"\r\n                  v-else\r\n                  @click=\"delete_goods2(scope.$index)\"\r\n                  >删除</el-button\r\n                >\r\n                <el-button\r\n                  size=\"mini\"\r\n                  type=\"primary\"\r\n                  @click=\"\r\n                    infoDialog = {\r\n                      show: 'checkCitys',\r\n                      value: { form: scope.row, cities: cities },\r\n                    }\r\n                  \"\r\n                  >选择城市</el-button\r\n                >\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"medium\" @click=\"close\">取 消</el-button>\r\n        <el-button size=\"medium\" type=\"primary\" @click=\"submit\"\r\n          >确 定</el-button\r\n        >\r\n      </div>\r\n      <el-image-viewer\r\n        v-if=\"viewIndex >= 0\"\r\n        :on-close=\"viewIndexClose\"\r\n        :url-list=\"this.form.path\"\r\n        :initialIndex=\"viewIndex\"\r\n      ></el-image-viewer>\r\n    </el-dialog>\r\n    <checkCitys\r\n      :show=\"infoDialog.show\"\r\n      :value=\"infoDialog.value\"\r\n      @visibleChange=\"InfoVisibleChange\"\r\n    ></checkCitys>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { API_URL, postageInfo, editPostage } from \"@/request/api.js\";\r\n\r\nimport ElImageViewer from \"element-ui/packages/image/src/image-viewer\";\r\nimport checkCitys from \"./checkCitys.vue\";\r\n\r\nexport default {\r\n  name: \"saveSupplier\",\r\n  components: {\r\n    ElImageViewer,\r\n    checkCitys,\r\n  },\r\n  props: {\r\n    value: {\r\n      type: Object,\r\n    },\r\n    show: {\r\n      type: String,\r\n    },\r\n  },\r\n  watch: {\r\n    show: {\r\n      handler(val) {\r\n        if (val === this.$options.name) {\r\n          this.$ObjectMixed(this.form, this.value.form);\r\n        \r\n          // this.form = this.value.form;\r\n          console.log(this.value);\r\n          this.cities = this.value.cities;\r\n          if (this.form.id) {\r\n            postageInfo({ id: this.form.id }).then((res) => {\r\n              console.log(\"aaaaa\");\r\n              console.log(res.data);\r\n              this.form = res.data;\r\n            });\r\n          }\r\n          this.form.condition == 1\r\n            ? (this.form.condition = true)\r\n            : (this.form.condition = false);\r\n            console.log(this.form)\r\n        }\r\n      },\r\n      deep: true,\r\n      immediate: true,\r\n    },\r\n    \"form.mode\"(val) {\r\n      this.form.rule.forEach((res) => {\r\n        res.mode = val;\r\n      });\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      infoDialog: {\r\n        show: \"\",\r\n        value: {},\r\n      },\r\n      editIndex: 0,\r\n      editIndex2: 0,\r\n      PostName: [],\r\n      types: [\r\n        { value: 1, label: \"计件\" },\r\n        { value: 2, label: \"称重\" },\r\n      ],\r\n      isdisabled: true,\r\n      viewIndex: -1,\r\n      activeName: \"first\",\r\n      uploadcover: {\r\n        url: API_URL + \"admin/upload\",\r\n        token: \"\",\r\n      },\r\n      form: {\r\n        id: \"\",\r\n        token: \"\",\r\n        name: \"\",\r\n        mode: 1,\r\n        is_free: 1,\r\n        condition: 1,\r\n        rule: [],\r\n        proviso: [],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    handleClick(tab, event) {\r\n      console.log(tab, event);\r\n    },\r\n    // 新增规则\r\n    addGoods() {\r\n      let data = {\r\n        id: \"\",\r\n        num: \"\",\r\n        weight: \"\",\r\n        money: \"\",\r\n        mode: this.form.mode,\r\n        region: [],\r\n      };\r\n      this.form.rule.push(data);\r\n    },\r\n    // 新增条件\r\n    addGoods2() {\r\n      let data = { id: \"\", condition: \"\", type: 1, region: [] };\r\n      this.form.proviso.push(data);\r\n    },\r\n    // 删除规则\r\n    delete_goods(index) {\r\n      this.$confirm(\"此操作将永久删除该选项, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        this.$message({\r\n          type: \"success\",\r\n          message: \"删除成功!\",\r\n        });\r\n        this.form.rule.splice(index, 1);\r\n      });\r\n    },\r\n    // 删除条件\r\n    delete_goods2(index) {\r\n      this.$confirm(\"此操作将永久删除该选项, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        this.$message({\r\n          type: \"success\",\r\n          message: \"删除成功!\",\r\n        });\r\n        this.form.proviso.splice(index, 1);\r\n      });\r\n    },\r\n    //计价方式\r\n    checkType(value) {\r\n      this.form.mode = value;\r\n    },\r\n    checkType2(value) {\r\n      this.form.condition = value;\r\n    },\r\n    viewIndexClose() {\r\n      this.viewIndex = -1;\r\n    },\r\n    submit() {\r\n      this.form.condition == true\r\n        ? (this.form.condition = 1)\r\n        : (this.form.condition = 2);\r\n      console.log(this.form);\r\n      editPostage(this.form).then((res) => {\r\n        this.$message.success({\r\n          message: res.msg || \"操作成功\",\r\n        });\r\n        this.$emit(\"visibleChange\", { getList: true, show: \"\" });\r\n      });\r\n    },\r\n    InfoVisibleChange(e) {\r\n      if (!e.show) {\r\n        this.infoDialog.value = {};\r\n        this.infoDialog.show = \"\";\r\n      }\r\n      if (e.getList) {\r\n        this.getList();\r\n      }\r\n    },\r\n    close() {\r\n      this.$emit(\"visibleChange\", { getList: false, show: \"\" });\r\n    },\r\n    closed() {\r\n      Object.assign(this.$data, this.$options.data());\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.mydialog {\r\n  /deep/ .el-dialog__body {\r\n    padding-top: 0;\r\n    padding-bottom: 0;\r\n    .el-tab-pane {\r\n      height: 480px;\r\n      overflow-y: auto;\r\n    }\r\n  }\r\n}\r\n.image-box {\r\n  width: 80px;\r\n  height: 80px;\r\n  border: 1px solid #eee;\r\n  border-radius: 4px;\r\n  margin-right: 10px;\r\n}\r\n.upload-box {\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 80px;\r\n    height: 80px;\r\n    line-height: 80px;\r\n    text-align: center;\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 4px;\r\n  }\r\n  .avatar {\r\n    width: 100px;\r\n    height: 125px;\r\n  }\r\n}\r\n.upload-images-box {\r\n  & /deep/ .el-upload-list__item {\r\n    width: 80px;\r\n    height: 80px;\r\n  }\r\n  & /deep/ .el-upload--picture-card {\r\n    width: 80px;\r\n    height: 80px;\r\n    line-height: 80px;\r\n  }\r\n}\r\n</style>\r\n"]}]}